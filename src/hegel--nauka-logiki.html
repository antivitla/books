<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Наука логики. Гегель</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="book.css" rel="stylesheet">
  <link href="book-scroll.css" rel="stylesheet">

  <script src="binary-search.js"></script>
  <script src="book-fragment.js"></script>
  <script src="book-scroll.js"></script>
</head>
<body>

<!-- 1. Compose -->
<book-scroll class="book" current-view-margin="0.05" ignore-intersection>
  <book-fragment src="hegel--nauka-logiki/k-voprosu-o-dialektike.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/predislovie-k-pervomu-izdaniyu.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/predislovie-ko-vtoromu-izdaniyu.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/vvedenie.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--s-chego-sleduet-nachinat-nauku.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--otdel-1--bytie.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--otdel-1--nalichnoe-bytie.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--otdel-1--dlya-sebya-bytie.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--otdel-2--velichina-kolichestvo.html" src-selector="section > *"></book-fragment>
  <book-fragment src="hegel--nauka-logiki/kniga-1--otdel-2--opredelennoe-kolichestvo.html" src-selector="section > *"></book-fragment>
</book-scroll>
<!-- 2. Open at specified position -->
<script>
  const BookScroll = document.querySelector('book-scroll');

  document.addEventListener('book-fragment-loaded', (event) => {
    const children = Array.from(BookScroll.children);
    if (
      children.indexOf(event.target) > -1 &&
      children.filter(child => child.getAttribute('src') && !child.loaded).length === 0
    ) {
      BookScroll.scrollToPosition(location.hash.replace(/^#/, ''));
    }
  });

  BookScroll.addEventListener('book-scroll-position', function (event) {
    location.hash = `#${event.detail.fragment},${event.detail.child},${event.detail.shift.toFixed(4)}`;
  });


</script>

</body>
</html>
